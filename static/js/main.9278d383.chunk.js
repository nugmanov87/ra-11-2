(this["webpackJsonpra-11-1"]=this["webpackJsonpra-11-1"]||[]).push([[0],{25:function(e,t,a){e.exports=a(37)},30:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(12),o=a.n(c),i=(a(30),a(24)),l=a(6),u=a(2),s=a(5),E=a.n(s),m=a(11);function p(e){return{type:"FETCH_SERVICES_FAILURE",payload:{error:e}}}function d(e){return{type:"FETCH_SERVICES_SUCCESS",payload:e}}function v(e){return{type:"CHANGE_SERVICES_INIT",payload:e}}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(m.a)(E.a.mark((function t(a){var r,n,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FETCH_SERVICES_REQUEST"}),r=e?"".concat("https://ra-11-2-server.herokuapp.com/api/services","/").concat(e):"https://ra-11-2-server.herokuapp.com/api/services",t.prev=2,t.next=5,fetch(r);case 5:if((n=t.sent).ok){t.next=8;break}throw new Error(n.statusText);case 8:return t.next=10,n.json();case 10:c=t.sent,a(e?v(c):d({data:c})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),a(p({error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}()};function b(e){var t=Object(u.c)((function(e){return e.serviceAdd})),a=t.item,r=t.loading,c=t.error,o=Object(u.b)(),i=function(e){var t=e.target,a=t.name,r=t.value;o(function(e,t){return{type:"CHANGE_ADD_SERVICE_FIELD",payload:{nameField:e,value:t}}}(a,r))};return n.a.createElement("form",{onSubmit:function(e){var t,r;e.preventDefault(),o((t=a.name,r=a.price,function(){var e=Object(m.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"ADD_SERVICES_REQUEST"}),e.prev=1,e.next=4,fetch("https://ra-11-2-server.herokuapp.com/api/services",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t,price:r})});case 4:id?a({type:"CHANGE_SERVICES_SUCCESS"}):(a({type:"ADD_SERVICES_SUCCESS"}),a(S())),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a({type:"ADD_SERVICES_FAILURE",payload:{error:e.t0.message}});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()))}},c&&n.a.createElement("div",{className:"error-msg"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"),n.a.createElement("input",{name:"name",onChange:i,value:a.name}),n.a.createElement("input",{name:"price",onChange:i,value:a.price}),!r&&n.a.createElement("button",{class:"ui inverted green button",type:"submit",disabled:r},"Save"),r&&n.a.createElement("div",{className:"ui active slow green double loader"}))}function f(e){var t=e.match,a=e.history,c=Object(u.c)((function(e){return e.serviceList})),o=c.items,i=c.loading,l=c.error,s=Object(u.c)((function(e){return e.serviceIsLoadng})),p=s.isLoading,d=(s.isError,Object(u.b)());Object(r.useEffect)((function(){d(S())}),[d]);var v=function(e){d(function(e){return function(){var t=Object(m.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"IS_LOADING_REQUEST"}),t.prev=1,t.next=4,fetch("".concat("https://ra-11-2-server.herokuapp.com/api/services","/").concat(e),{method:"DELETE"});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),a({type:"IS_LOADING_FAILURE",payload:{error:t.t0.message}});case 9:return t.prev=9,a({type:"IS_LOADING_SUCCESS"}),a(S()),t.finish(9);case 13:case"end":return t.stop()}}),t,null,[[1,6,9,13]])})));return function(e){return t.apply(this,arguments)}}()}(e))};return i?n.a.createElement("div",{className:"ui active slow green double loader"}):l?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"error-msg"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"),n.a.createElement("button",{class:"ui red basic button",onClick:function(){d(S())}},"Refresh")):(console.log(t.url),n.a.createElement(n.a.Fragment,null,n.a.createElement(b,null),n.a.createElement("ul",null,o&&o.map((function(e){return n.a.createElement("li",{key:e.id},e.name," ",e.price,n.a.createElement("button",{className:"button btn",onClick:function(){return function(e){a.push("".concat(t.url,"/").concat(e))}(e.id)}},n.a.createElement("i",{class:"edit icon"})),n.a.createElement("button",{onClick:function(){return v(e.id)},disabled:p},n.a.createElement("i",{class:"trash icon"})))})))))}var C=a(23);function h(e){var t=e.match,a=e.history,c=Object(u.c)((function(e){return e.serviceChange})),o=c.item,i=c.chLoading,l=c.chError,s=Object(u.c)((function(e){return e.serviceList})),p=s.loading,d=s.error,v=Object(r.useState)(!0),b=Object(C.a)(v,2),f=b[0],h=b[1],g=Object(u.b)(),_=Number(t.params.id);Object(r.useEffect)((function(){f||i||a.goBack(),f&&(h(!1),g(S(_)))}),[g,i]);var I=function(e){var t=e.target,a=t.name,r=t.value;g(function(e,t){return{type:"CHANGE_SERVICE_FIELD",payload:{nameField:e,value:t}}}(a,r))};return p?n.a.createElement("div",{className:"ui active slow green double loader"}):d?n.a.createElement("div",null,n.a.createElement("div",{className:"error-msg"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"),n.a.createElement("button",{class:"ui red basic button",onClick:function(){a.goBack()}},"\u041d\u0430\u0437\u0430\u0434")):n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g(function(e,t,a,r){return function(){var n=Object(m.a)(E.a.mark((function n(c){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c({type:"CHANGE_SERVICES_REQUEST"}),n.prev=1,n.next=4,fetch("https://ra-11-2-server.herokuapp.com/api/services",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:e,name:t,price:a,content:r})});case 4:n.sent,c({type:"CHANGE_SERVICES_SUCCESS"}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0),c({type:"CHANGE_SERVICES_FAILURE",payload:{error:{error:n.t0.message}}});case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}(_,o.name,o.price,o.content))},disabled:i,className:"change-form"},n.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),n.a.createElement("input",{name:"name",onChange:I,value:o.name}),n.a.createElement("label",null,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),n.a.createElement("input",{name:"price",onChange:I,value:o.price}),n.a.createElement("label",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),n.a.createElement("input",{name:"content",onChange:I,value:o.content}),n.a.createElement("div",{className:"buttons"},n.a.createElement("button",{type:"button",onClick:function(){a.goBack()}},"\u041e\u0442\u043c\u0435\u043d\u0430"),!i&&n.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))),i&&n.a.createElement("div",{className:"ui active slow green double loader"}),l&&n.a.createElement("p",null,l.message))}function g(e){var t=window.location.pathname;return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,null,n.a.createElement(l.d,null,n.a.createElement(l.b,{path:"".concat(t,"services/:id"),component:h}),n.a.createElement(l.b,{path:"".concat(t,"services"),component:f}),n.a.createElement(l.a,{exact:!0,from:"".concat(t),to:"".concat(t,"services")}))))}var _=a(9),I=a(22),y=a(1),O={items:[],loading:!1,error:null};var R=a(8),j={item:{name:"",price:""},loading:!1,error:null};var A={item:{id:"",name:"",price:"",content:""},chLoading:!1,chError:null};var N={isLoading:!1,isError:null};var L=Object(_.c)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SERVICES_REQUEST":return Object(y.a)({},e,{loading:!0,error:null});case"FETCH_SERVICES_FAILURE":var a=t.payload.error;return Object(y.a)({},e,{loading:!1,error:a});case"FETCH_SERVICES_SUCCESS":var r=t.payload.data;return Object(y.a)({},e,{items:r,loading:!1,error:null});case"REMOVE_SERVICE":var n=t.payload;return e.items.filter((function(e){return e.id!==n.id}));case"CHANGE_SERVICES_INIT":return Object(y.a)({},e,{loading:!1,error:null});default:return e}},serviceAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ADD_SERVICE_FIELD":var a=t.payload,r=a.nameField,n=a.value;return Object(y.a)({},e,{item:Object(y.a)({},e.item,Object(R.a)({},r,n))});case"ADD_SERVICES_REQUEST":return Object(y.a)({},e,{loading:!0,error:null});case"ADD_SERVICES_SUCCESS":return Object(y.a)({},j);case"ADD_SERVICES_FAILURE":var c=t.payload.error;return Object(y.a)({},e,{loading:!1,error:c});default:return e}},serviceChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SERVICE_FIELD":var a=t.payload,r=a.nameField,n=a.value;return Object(y.a)({},e,{item:Object(y.a)({},e.item,Object(R.a)({},r,n))});case"CHANGE_SERVICES_REQUEST":return Object(y.a)({},e,{chLoading:!0,chError:null});case"CHANGE_SERVICES_FAILURE":var c=t.payload.error;return Object(y.a)({},e,{chLoading:!1,chError:c});case"CHANGE_SERVICES_SUCCESS":return Object(y.a)({},A);case"CHANGE_SERVICES_INIT":console.log(t.payload);var o=t.payload,i=o.id,l=o.name,u=o.price,s=o.content;return Object(y.a)({},e,{chLoading:!1,chError:null,item:{id:i,name:l,price:u,content:s}});default:return e}},serviceIsLoadng:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOADING_REQUEST":return Object(y.a)({},e,{isLoading:!0});case"IS_LOADING_FAILURE":console.log(t.payload);var a=t.payload.error;return Object(y.a)({},e,{isLoading:!1,isError:a});case"IS_LOADING_SUCCESS":return Object(y.a)({},N);default:return e}}}),D=Object(_.d)(L,Object(_.a)(I.a));o.a.render(n.a.createElement(u.a,{store:D},n.a.createElement(g,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.9278d383.chunk.js.map